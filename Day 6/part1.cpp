// Example program
#include <iostream>
#include <string>

char turn(char currentDirection)
{
    switch(currentDirection)
    {
        case 'u':return 'r';
        case 'l':return 'u';
        case 'd':return 'l';
        case 'r':return 'd';
    }
    exit(-1);
}    

int solved(std::string grid[], int size, int initX, int initY)
{
    char currentDirection = 'u'; // 'u', 'l', 'd', 'r'
    int currentX = initX;
    int currentY = initY;
    
    int answer = 1;
    grid[currentX][currentY] = 'X';
    
    while (0 <= currentX && currentX < size && 0 <= currentY && currentY < size)
    {
        //std::cout << "currentX: " << currentX << ", currentY: " << currentY << "\n";
        
        int newX = currentX;
        int newY = currentY;
        switch(currentDirection)
        {
            case 'u':--newX;break;
            case 'l':--newY;break;
            case 'd':++newX;break;
            case 'r':++newY;break;
        }
        if (newX < 0 || newX >= size || newY < 0 || newY >= size)
        {
            break;
        }
        if (grid[newX][newY] == '#')
        {
            currentDirection = turn(currentDirection);
            continue;
        }
        else if (grid[newX][newY] != 'X')
        {
            grid[newX][newY] = 'X';
            ++answer;
        }
        currentX = newX;
        currentY = newY;
    }
    return answer;
}

int main()
{
    int const size = 130;
    int initX = 33;
    int initY = 56;
    std::string input[size] = {
        "......##...#...#....#.......#....................##............#.#..#.......#.........................................#...........",
        "..................................#.............#................................#..........##..................#.................",
        "....#......................#................#...........................................#....................................#....",
        "............#..............#...#...#...............#..........#.#....#..........................#....##...........................",
        "....#.............#.....#.....................................................................#...#..........................#....",
        ".................#............#......................#.................#.............#..................#.........................",
        "................#...............#....................#...#..#...#.#.....................................................#.........",
        "..............#.#...............................................................#....................#.......#....................",
        ".............#...#..#............................#..............#..#.........................................#....................",
        ".........................#.........#..#.......#...#..............#..#..............................#.........#............#.......",
        "#...............................................................................................................#.................",
        "..........................#.....#.........................#...................#.......#.........................#.................",
        "...........#...........#........#........................#..........#.#.................#........#............#...............#...",
        "..#..#................#...................................................#..................................................#....",
        ".....#............................#..........................................................................#....................",
        "................#.....#...........................#..........................................#.........#........................#.",
        "..#...........................................##............#.........#..........................#.......................#.....#..",
        ".....................#.............#.....#.......#.##.....#......................................#.#..#.#.........................",
        ".......#...##.....#..........#...............#....#..........................#..............................................##....",
        "..#.......#..................##..............#..........................#.#....#....#....................#.#.#...............#....",
        "....................#.......#.......#............#..............#.......#.........#...#.....#........#.#..........................",
        "...............................................#.....#........................................#..#.........#..........#...........",
        "............#...#.............................................................................#.......##..........................",
        "##..........................#...........................#..............................#..........................................",
        "..............................................#.............................................#.................................#...",
        ".............#..............#................##...........#...............#.......................................................",
        "......#............#.......#..#....#.............................................................................#.#..............",
        "..#..##..#..................#...............................................##......#........................................#....",
        "..#...............................#.#........#................................................#.....#........#.#..................",
        ".........#.......#.....................................#............................#..............................#..............",
        "..........................................................................................................#.....................#.",
        "....................#......................................#..........................#.........................##................",
        "........#..............................................................................#.#..................#..................#..",
        "........................................................^..#...................#....#..............##.............................",
        "..#.#........................................................#..#..................#.....................................#....#...",
        ".........................#....#............................#......................................................................",
        ".#......#.............................................................................................#....................###....",
        "...........#...#.#............#........................................................................#..........................",
        "......#..........#.............................#.#.................................#...#.............#.#........................#.",
        "...............................................#..........#.......#.........#........................................#.#..........",
        ".................#.....................#.......#..................................................................................",
        ".#...............#.........#...................#..............#........................#.....#....................................",
        "...........#..............#..................................................................#...................................#",
        ".................#.............#...........#.......................................#......................#......#..........#.....",
        "........#..#.................#..........#....................................................#.....#...........#.................#",
        ".....................#..#.................#......#......#..#..#..........#........................#...........................##..",
        ".................#........#....#.................................................#.#.........................#............#..#....",
        ".....................#...............##...................#.....#..#............................#.#.............#.................",
        ".#..#......##...............#.......#..........................................................................#......#...........",
        "#..#...................................#.#................#.....#.................................#...........................#...",
        "..............#............................#............#...#...#.............#..........#............#...#............#..........",
        "..........##.................#................................#...........#.#....#...............................................#",
        "......#...........#.............#..........#.............#............#...................#.......................#...............",
        "..............#.......#...........................................................................................................",
        "...#................................................................#...............................#....#...............#........",
        "...#..##................#..............................................................................#..........##.#............",
        ".#........#..........#..................#......................#...........#......................................................",
        "....#.......................#...#...........................................#..................#...............................#..",
        ".............................#...........#..........#.................#.....................................................#.....",
        "...........#.........#............#...............................#................#..............#.........................#.....",
        "..........#........#.....#.....................................#.................#.....................................#..#.......",
        "...#.......#...................................................................#.................#................................",
        ".#....#........#..............................#........#.....#........#..#...#.#......................#..........................#",
        ".....................................................................#....................#.......................................",
        ".............................#..............................#.#....................................................#............#.",
        "..#.....#.......#.......#......................#.#.#.........................................................#.....#........#.....",
        "...............#..........#..#....#..................#..........................................#.................................",
        "............#...................#................#.............................................................................#..",
        "........#...#......................................##....................#..................#..........##............#...#........",
        "......................#......#......#.#.........................................................................#.............#...",
        "........#......................................................................................#.................#................",
        ".................................................#....................#..............##.......................................#..#",
        ".............#..........................................................#.................#..........................#....#......#",
        "......................#.....................#............................#..................#...........#.........................",
        "#..............#...........................#...#.#................................................................................",
        ".......#............................#...........................................................#...............#.................",
        "........................#..................................................................................#......................",
        "...................#..........................#.........#........#...........................#....................................",
        ".............#............#.......................................................................................##....#.........",
        "................#.........#.....................................................................................................#.",
        "........#.............................#.................................#.......##..............#............................#....",
        "#........#.....#.....#.......#...............................#....................................................#..............#",
        "........................#.............................#.....#...........#........#............#...................................",
        "..................#...........#...#.............................................................................#...............#.",
        "...................#..................#...................#..............................#....#...........#..............#........",
        "...............#................#.#....................#.........#.........#.............#.........#......#..................#....",
        "..................#.............................#...........................#....#....#......#..#.#....................#..........",
        "...#.......................................#...............................................................#................#.....",
        "...................#.........................................................#....................................................",
        ".................#..............................#.................................................................................",
        ".............#.......#...#....................................................#........#....................................#...#.",
        "..............#...................#.#..........#....................................................#....#...#.##....#............",
        "........#..#...........................................#.........#...#...............#.........................#..................",
        "#.....#...........................................#.................................................#.............................",
        "#...........................................#..........#..........................................#...............#...............",
        "............................#.................................................#...#...............................................",
        ".#...................#.......................................................................................#......#...##..#.....",
        ".....#..#...............#........#....#.........#........................#.............#..........................................",
        "...................#................#........................................#.#..................................................",
        "......#.#...........................#...................#..........#..........#......#............................................",
        "..........................#.#..............#............#.#.......................................................................",
        "...#..#........................#..............................................#..#...#.....#........#.............................",
        "..........................#.....................#.........................................................#............#.#........",
        "............................#.....................#.............#.................................................................",
        "..........................................#..#.................................................................#......#.#.#.......",
        "..........##......................................#................................##....................#..#.....................",
        "..............#.......................................................#...........................................................",
        "..........#........#........................................................................................#........#...#........",
        "......................#.#...................#...............#.....#......................#.....#.......#.......#..........#.......",
        "......#..#....#..................#.........................................#......................................................",
        "...............#.....#..#..........................................##.........................................##.............#....",
        ".....................#..................#..................................#...................#............................#.#...",
        "..#................#..#................................................#...........#..........#.............#...................#.",
        ".......#.............#.......................................................................#...#.........................##..#..",
        "...#...................#..................#.............#..#.........................................#........##..................",
        ".................................#...........#........#.....................#.........................#..#........................",
        ".......#..................#..................................#......................................#.#....................#......",
        "..................................................................................#...........#....#.......#......#..........#....",
        "........##.........................................................#.......................#........#............#................",
        "...#...............##.#..................#....................................#.............#.................#...................",
        "..................##.........#...................#......#................#......................................................#.",
        ".#....................#............#..............#.............#.........#........................................#......#..#....",
        "...............#...........................................................#........................#.............#...............",
        "#............................#...................#...............................##..#...............#..........................#.",
        "................#.............#..........#.........#..........................#....#..............................#..............#",
        "...................................#.........................................#....................................................",
        "....#................................................................#.#..#..........#....#.............................#.........",
        "...........#.............#..........#........#...#...#........#.............#.......................................##............",
        ".........#.......................#..........#....#.......................................#.....#...#.#..........#.................",
        ".......................#...........#.......#......#.#...............................................#.................#.#........."
    };

    if (input[initX][initY] != '^')
    {
        std::cout << "You fucked up!\n";
        exit(-1);
    }
    
    int answer = solved(input, size, initX, initY);
    std::cout << "answer: " << answer << "\n";
}